<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="page-title">Firelight Duel Academy | Modern Yu-Gi-Oh! TCG Store</title>
    <meta name="description" id="page-description" content="Your premier destination for Yu-Gi-Oh! single cards, competitive play, and tournament events. Modern TCG store with real-time pricing and advanced search.">
    
    <!-- Preconnect for performance -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Stylesheets -->
    <link rel="stylesheet" href="assets/css/modern-tcg-store.css">
    <link rel="icon" href="https://images.ygoprodeck.com/images/cards/89631139.jpg">
    
    <!-- Meta tags for SEO -->
    <meta property="og:title" id="og-title" content="Firelight Duel Academy - Modern Yu-Gi-Oh! TCG Store">
    <meta property="og:description" id="og-description" content="Premium Yu-Gi-Oh! singles, competitive pricing, and tournament events.">
    <meta property="og:type" content="website">
    <meta property="og:image" content="https://images.ygoprodeck.com/images/cards/89631139.jpg">
</head>
<body>
    <!-- 401Games-Style Header -->
    <header class="modern-header">
        <!-- Top Bar -->
        <div class="header-top">
            <div class="header-top-container">
                <div class="header-top-left">
                    <a href="tel:647-555-DUEL" class="header-top-link"><i class="fas fa-phone"></i> (647) 555-DUEL</a>
                    <a href="mailto:support@firelightduelacademy.com" class="header-top-link"><i class="fas fa-envelope"></i> Support</a>
                    <!-- Tournaments link hidden - store not hosting events -->
                    <!-- <a href="#" class="header-top-link" onclick="navigateTo('events')"><i class="fas fa-trophy"></i> Tournaments</a> -->
                </div>
                <div class="header-top-right">
                    <span><i class="fas fa-shipping-fast"></i> Free Shipping on Orders $100+ CAD</span>
                </div>
            </div>
        </div>

        <!-- Main Header -->
        <div class="header-main">
            <div class="header-container">
                <!-- Brand Section -->
                <div class="brand-section">
                    <img src="https://images.ygoprodeck.com/images/cards/89631139.jpg" alt="Firelight Duel Academy" class="brand-logo">
                    <div class="brand-text">
                        <a href="#" class="brand-name" onclick="navigateTo('home')">Firelight Duel Academy</a>
                        <span class="brand-tagline">Yu-Gi-Oh! Singles & Tournament Store</span>
                    </div>
                </div>

                <!-- Navigation Section -->
                <nav class="nav-section">
                    <ul class="nav-links">
                        <li><a href="#" class="nav-link" id="nav-home" onclick="navigateTo('home')">Home</a></li>
                        <li><a href="#" class="nav-link" id="nav-singles" onclick="navigateTo('singles')">Singles</a></li>
                        <li><a href="#" class="nav-link" id="nav-decks" onclick="navigateTo('decks')">Decks</a></li>
                        <!-- Events and Account hidden but functionality preserved -->
                        <li style="display: none;"><a href="#" class="nav-link" id="nav-events" onclick="navigateTo('events')">Events</a></li>
                        <li style="display: none;"><a href="#" class="nav-link" id="nav-account" onclick="navigateTo('account')">Account</a></li>
                    </ul>
                </nav>

                <!-- Search Section -->
                <div class="search-section">
                    <div class="search-container">
                        <span class="search-icon"><i class="fas fa-search"></i></span>
                        <input type="text" class="search-input" placeholder="Search Yu-Gi-Oh! cards..." id="search-dropdown-input">
                        <div class="search-dropdown" id="search-dropdown" style="display: none;">
                            <div class="search-results" id="search-results">
                                <!-- Search results will be populated here -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Action Section -->
                <div class="action-section">
                    <button class="action-btn" onclick="tcgStore.openWishlistModal()">
                        <i class="fas fa-heart"></i> Wishlist
                        <span class="wishlist-badge" style="display: none;">0</span>
                    </button>
                    <button class="action-btn" onclick="tcgStore.openCart()">
                        <i class="fas fa-shopping-cart"></i> Cart
                        <span class="cart-badge" style="display: none;">0</span>
                    </button>
                    <a href="#" class="action-btn" id="account-btn" onclick="handleAccountClick()">
                        <i class="fas fa-user"></i> Account
                    </a>
                </div>
            </div>
        </div>
    </header>

    <!-- Dynamic Content Container -->
    <main id="main-content" style="width: 100%; margin: 0 auto; padding: var(--space-8) var(--space-8); min-height: 60vh;">
        <!-- Page content will be loaded here dynamically -->
        <div class="loading-container">
            <div class="loading-spinner"></div>
            <p class="loading-text">Loading...</p>
        </div>
    </main>

    <!-- 401Games-Style Footer -->
    <footer class="modern-footer">
        <div class="footer-main">
            <div class="footer-container">
                
                <!-- Store Features -->
                <div class="footer-features">
                    <div class="footer-feature">
                        <div class="footer-feature-icon"><i class="fas fa-shipping-fast"></i></div>
                        <h4>Fast & Free Shipping</h4>
                        <p>Free shipping on orders $75+ CAD. Expedited shipping to Canada and USA.</p>
                    </div>
                    <!-- Community Events feature hidden - store not hosting events -->
                    <!--
                    <div class="footer-feature">
                        <div class="footer-feature-icon"><i class="fas fa-trophy"></i></div>
                        <h4>Community Events</h4>
                        <p>Daily events at our store! From casual to competitive, we have something for everyone.</p>
                    </div>
                    -->
                    <div class="footer-feature">
                        <div class="footer-feature-icon"><i class="fas fa-dollar-sign"></i></div>
                        <h4>Competitive Pricing</h4>
                        <p>Real-time market pricing powered by YGOPRODeck API ensures the best deals.</p>
                    </div>
                    <div class="footer-feature">
                        <div class="footer-feature-icon"><i class="fas fa-shield-alt"></i></div>
                        <h4>Secure Shopping</h4>
                        <p>Safe and secure checkout with multiple payment options and buyer protection.</p>
                    </div>
                </div>

                <!-- Store Locations -->
                <div class="store-locations">
                    <div class="store-location">
                        <h4>Firelight Academy - Main</h4>
                        <p>1247 Queen Street West, Toronto, Ontario</p>
                        <p>Queen & Dovercourt Intersection</p>
                        <a href="tel:647-555-DUEL" class="store-phone">(647) 555-DUEL</a>
                    </div>
                    <div class="store-location">
                        <h4>Firelight Academy - North</h4>
                        <p>8850 Yonge Street, Richmond Hill, Ontario</p>
                        <p>Yonge & Major Mackenzie Intersection</p>
                        <a href="tel:905-555-FIRE" class="store-phone">(905) 555-FIRE</a>
                    </div>
                </div>

                <!-- Footer Links -->
                <div class="footer-grid">
                    <div class="footer-section">
                        <h3>Firelight Duel Academy</h3>
                        <p>Your premier destination for Yu-Gi-Oh! singles, competitive play, and tournament events. We pride ourselves on providing the best selection and prices in Canada.</p>
                    </div>
                    
                    <div class="footer-section">
                        <h3>Quick Links</h3>
                        <ul class="footer-links">
                            <li><a href="#" onclick="navigateTo('singles')">Yu-Gi-Oh! Singles</a></li>
                            <li><a href="#" onclick="navigateTo('decks')">Popular Decks</a></li>
                            <!-- Tournament Events link hidden - store not hosting events -->
                            <!-- <li><a href="#" onclick="navigateTo('events')">Tournament Events</a></li> -->
                            <li><a href="#" onclick="navigateTo('account')">My Account</a></li>
                        </ul>
                    </div>
                    
                    <div class="footer-section">
                        <h3>Customer Service</h3>
                        <ul class="footer-links">
                            <li><a href="mailto:info@firelightduelacademy.com">Contact Us</a></li>
                            <li><a href="#" onclick="navigateTo('shipping-policy')">Shipping Policy</a></li>
                            <li><a href="#" onclick="navigateTo('return-policy')">Return Policy</a></li>
                            <li><a href="#" onclick="navigateTo('faq')">FAQ</a></li>
                        </ul>
                    </div>
                    
                    <div class="footer-section">
                        <h3>Connect</h3>
                        <ul class="footer-links">
                            <li><a href="#">Facebook</a></li>
                            <li><a href="#">Instagram</a></li>
                            <li><a href="#">Twitter</a></li>
                            <li><a href="#">Discord</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="footer-bottom">
            <div class="footer-container">
                <p>&copy; 2025 Firelight Duel Academy. All rights reserved. | Yu-Gi-Oh! is a trademark of Konami Digital Entertainment.</p>
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="assets/js/services/database-service.js"></script>
    <script src="assets/js/database-init.js"></script>
    <script src="assets/js/modern-tcg-store.js"></script>
    <script src="assets/js/app-router.js"></script>
    
    <!-- Global Product Page Functions -->
    <script>
        // Global functions for product page functionality
        function changeProductQuantity(delta) {
            const quantityInput = document.getElementById('product-quantity');
            if (quantityInput) {
                const currentValue = parseInt(quantityInput.value) || 1;
                const newValue = Math.max(1, Math.min(99, currentValue + delta));
                quantityInput.value = newValue;
            }
        }

        function addProductToCart(cardName, basePrice, image) {
            if (window.tcgStore) {
                const quantity = parseInt(document.getElementById('product-quantity')?.value) || 1;
                const condition = parseFloat(document.getElementById('product-condition')?.value) || 1.0;
                
                // Get selected set data if available
                const selectedSetData = window.selectedSetData || {};
                const finalPrice = selectedSetData.price ? 
                    (parseFloat(selectedSetData.price) * condition).toFixed(2) : 
                    (basePrice * condition).toFixed(2);
                
                for (let i = 0; i < quantity; i++) {
                    window.tcgStore.addToCartWithDetails(
                        cardName, 
                        finalPrice, 
                        image,
                        selectedSetData.setCode || '',
                        selectedSetData.rarity || '',
                        selectedSetData.setName || ''
                    );
                }
            }
        }

        function openImageZoom(imageSrc, altText) {
            const modal = document.getElementById('image-zoom-modal');
            const zoomedImage = document.getElementById('zoomed-image');
            
            if (modal && zoomedImage) {
                zoomedImage.src = imageSrc;
                zoomedImage.alt = altText;
                modal.style.display = 'flex';
            }
        }

        function closeImageZoom() {
            const modal = document.getElementById('image-zoom-modal');
            if (modal) {
                modal.style.display = 'none';
            }
        }

        // Set selection functionality for product pages
        function selectSet(setCode, rarity, price, setName) {
            // Update all set options to remove selected state
            document.querySelectorAll('.set-option').forEach(option => {
                option.style.border = '2px solid var(--gray-300)';
                option.style.background = 'white';
                option.style.color = 'var(--gray-900)';
                option.classList.remove('selected');
            });

            // Mark the clicked option as selected
            event.target.closest('.set-option').style.border = '2px solid var(--primary-color)';
            event.target.closest('.set-option').style.background = 'var(--primary-color)';
            event.target.closest('.set-option').style.color = 'white';
            event.target.closest('.set-option').classList.add('selected');

            // Update the main price display
            const priceElement = document.querySelector('[style*="font-size: 2rem"][style*="font-weight: 700"][style*="color: var(--primary-color)"]');
            if (priceElement) {
                priceElement.textContent = `$${price}`;
            }

            // Update the rarity badge
            const rarityBadge = document.querySelector('[style*="background: var(--secondary-color)"]');
            if (rarityBadge) {
                rarityBadge.textContent = rarity;
            }

            // Store selected set data for cart functionality
            window.selectedSetData = {
                setCode: setCode,
                rarity: rarity,
                price: price,
                setName: setName
            };
        }

        // Account functionality
        function handleAccountClick() {
            if (window.tcgStore && window.tcgStore.currentUser) {
                navigateTo('account');
            } else if (window.tcgStore) {
                window.tcgStore.openLoginModal();
            } else {
                navigateTo('account');
            }
        }

        // Initialize account UI when page loads
        document.addEventListener('DOMContentLoaded', function() {
            // Wait for tcgStore to be initialized
            setTimeout(() => {
                if (window.tcgStore) {
                    window.tcgStore.updateAccountUI();
                }
            }, 100);
        });

        // Close modal when clicking outside
        window.addEventListener('click', function(event) {
            const modal = document.getElementById('image-zoom-modal');
            if (event.target === modal) {
                closeImageZoom();
            }
        });

        // Global FAQ toggle function
        function toggleFAQ(button) {
            const content = button.nextElementSibling;
            const icon = button.querySelector('span');
            
            if (content.style.display === 'none' || content.style.display === '') {
                content.style.display = 'block';
                icon.textContent = '−';
                button.setAttribute('aria-expanded', 'true');
            } else {
                content.style.display = 'none';
                icon.textContent = '+';
                button.setAttribute('aria-expanded', 'false');
            }
        }
    </script>
</body>
</html>

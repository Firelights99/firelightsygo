<!-- Page Header -->
<section style="text-align: center; margin-bottom: var(--space-8);">
    <h1 style="font-size: 3rem; font-weight: 700; color: var(--gray-900); margin-bottom: var(--space-4);">
        Deck Editor
    </h1>
    <p style="font-size: 1.125rem; color: var(--gray-600); max-width: 700px; margin: 0 auto;">
        Manage your decks, build new strategies, and explore popular deck lists
    </p>
</section>

<!-- Deck Management Actions -->
<section style="margin-bottom: var(--space-8);">
    <div style="display: flex; justify-content: center; gap: var(--space-4); margin-bottom: var(--space-6); flex-wrap: wrap;">
        <button class="filter-btn active" onclick="showMyDecks()" id="my-decks-btn">My Decks</button>
        <button class="filter-btn" onclick="showDeckBuilder()" id="builder-btn">Deck Builder</button>
        <button class="filter-btn" onclick="showPopularDecks()" id="popular-btn">Popular Decks</button>
    </div>
    
    <!-- Quick Actions -->
    <div style="display: flex; justify-content: center; gap: var(--space-3); margin-bottom: var(--space-6); flex-wrap: wrap;">
        <button class="primary-btn" onclick="createNewDeck()" style="padding: var(--space-3) var(--space-6);">
            <span style="margin-right: var(--space-2);">‚ûï</span> New Deck
        </button>
        <button class="secondary-btn" onclick="importDeck()" style="padding: var(--space-3) var(--space-6);">
            <span style="margin-right: var(--space-2);">üìÅ</span> Import Deck
        </button>
        <button class="secondary-btn" onclick="showDeckTemplates()" style="padding: var(--space-3) var(--space-6);">
            <span style="margin-right: var(--space-2);">üìã</span> Templates
        </button>
    </div>
</section>

<!-- My Decks Section -->
<section id="my-decks-section" style="display: block;">
    <div style="background: white; border-radius: var(--radius-2xl); box-shadow: var(--shadow-lg); padding: var(--space-8); border: 1px solid var(--gray-200); margin-bottom: var(--space-8);">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--space-6);">
            <h2 style="font-size: 2rem; font-weight: 700; color: var(--gray-900);">My Decks</h2>
            <div style="display: flex; gap: var(--space-3);">
                <select id="deck-sort" style="padding: var(--space-2) var(--space-3); border: 1px solid var(--gray-300); border-radius: var(--radius-md);" onchange="sortDecks()">
                    <option value="updated">Last Modified</option>
                    <option value="created">Date Created</option>
                    <option value="name">Name A-Z</option>
                </select>
                <button class="secondary-btn" onclick="refreshDeckList()" style="padding: var(--space-2) var(--space-3);">
                    üîÑ Refresh
                </button>
            </div>
        </div>
        
        <div id="user-decks-grid" class="deck-grid">
            <!-- Decks will be loaded here -->
        </div>
    </div>
</section>

<!-- Deck Builder Interface -->
<section id="deck-builder-section" style="display: none;">
    <link rel="stylesheet" href="assets/css/components/deck-builder.css">
    
    <div class="deck-builder-container">
        <!-- Card Search Panel -->
        <div class="card-search-panel">
            <div class="search-header">
                <h3>Card Search</h3>
                <input type="text" class="card-search-input" id="card-search" placeholder="Search cards..." onkeyup="searchCards()">
                <div class="search-filters">
                    <select class="filter-select" id="type-filter" onchange="searchCards()">
                        <option value="">All Types</option>
                        <option value="Monster">Monster</option>
                        <option value="Spell">Spell</option>
                        <option value="Trap">Trap</option>
                    </select>
                    <select class="filter-select" id="race-filter" onchange="searchCards()">
                        <option value="">All Races</option>
                        <option value="Dragon">Dragon</option>
                        <option value="Spellcaster">Spellcaster</option>
                        <option value="Warrior">Warrior</option>
                        <option value="Beast">Beast</option>
                        <option value="Fiend">Fiend</option>
                        <option value="Machine">Machine</option>
                    </select>
                    <select class="filter-select" id="attribute-filter" onchange="searchCards()">
                        <option value="">All Attributes</option>
                        <option value="DARK">DARK</option>
                        <option value="LIGHT">LIGHT</option>
                        <option value="FIRE">FIRE</option>
                        <option value="WATER">WATER</option>
                        <option value="EARTH">EARTH</option>
                        <option value="WIND">WIND</option>
                    </select>
                    <select class="filter-select" id="level-filter" onchange="searchCards()">
                        <option value="">All Levels</option>
                        <option value="1">Level 1</option>
                        <option value="2">Level 2</option>
                        <option value="3">Level 3</option>
                        <option value="4">Level 4</option>
                        <option value="5">Level 5</option>
                        <option value="6">Level 6</option>
                        <option value="7">Level 7</option>
                        <option value="8">Level 8</option>
                        <option value="9">Level 9</option>
                        <option value="10">Level 10</option>
                        <option value="11">Level 11</option>
                        <option value="12">Level 12</option>
                    </select>
                </div>
            </div>
            <div class="search-results" id="search-results">
                <div style="text-align: center; padding: var(--space-8); color: var(--gray-500);">
                    <div style="font-size: 2rem; margin-bottom: var(--space-2);">üîç</div>
                    <p>Search for cards to add to your deck</p>
                </div>
            </div>
        </div>

        <!-- Deck Builder Main -->
        <div class="deck-builder-main">
            <div class="deck-builder-header">
                <div class="deck-title" id="deck-title">Untitled Deck</div>
                <div class="deck-actions">
                    <button class="deck-btn" onclick="deckBuilder.newDeck()">New</button>
                    <button class="deck-btn secondary" onclick="deckBuilder.openLoadDeckModal()">Load</button>
                    <button class="deck-btn" onclick="deckBuilder.saveDeck()">Save</button>
                    <button class="deck-btn secondary" onclick="deckBuilder.downloadYDK()">Export YDK</button>
                </div>
            </div>
            
            <div class="deck-sections">
                <!-- Main Deck -->
                <div class="deck-section main-deck">
                    <div class="deck-section-header">
                        <span class="deck-section-title">Main Deck</span>
                        <span class="deck-section-count" id="main-count">0</span>
                    </div>
                    <div class="deck-section-body" id="main-deck">
                        <div class="deck-section-empty">
                            <div class="deck-section-empty-icon">üÉè</div>
                            <div class="deck-section-empty-text">Add cards to your main deck</div>
                        </div>
                    </div>
                </div>

                <!-- Extra Deck -->
                <div class="deck-section extra-deck">
                    <div class="deck-section-header">
                        <span class="deck-section-title">Extra Deck</span>
                        <span class="deck-section-count" id="extra-count">0</span>
                    </div>
                    <div class="deck-section-body" id="extra-deck">
                        <div class="deck-section-empty">
                            <div class="deck-section-empty-icon">‚≠ê</div>
                            <div class="deck-section-empty-text">Add extra deck monsters</div>
                        </div>
                    </div>
                </div>

                <!-- Side Deck -->
                <div class="deck-section side-deck">
                    <div class="deck-section-header">
                        <span class="deck-section-title">Side Deck</span>
                        <span class="deck-section-count" id="side-count">0</span>
                    </div>
                    <div class="deck-section-body" id="side-deck">
                        <div class="deck-section-empty">
                            <div class="deck-section-empty-icon">üîÑ</div>
                            <div class="deck-section-empty-text">Add side deck cards</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Deck Info Panel -->
        <div class="deck-info-panel">
            <div class="deck-info-header">
                <h3>Deck Statistics</h3>
            </div>
            <div class="deck-info-body">
                <div id="deck-stats">
                    <div class="deck-stats-grid">
                        <div class="stat-card">
                            <h4>Main Deck</h4>
                            <div class="stat-number invalid">0</div>
                            <div class="stat-breakdown">
                                <span>Monsters: 0</span>
                                <span>Spells: 0</span>
                                <span>Traps: 0</span>
                            </div>
                        </div>
                        
                        <div class="stat-card">
                            <h4>Extra Deck</h4>
                            <div class="stat-number valid">0</div>
                            <div class="stat-breakdown">
                                <span>Fusion: 0</span>
                                <span>Synchro: 0</span>
                                <span>Xyz: 0</span>
                                <span>Link: 0</span>
                            </div>
                        </div>
                        
                        <div class="stat-card">
                            <h4>Side Deck</h4>
                            <div class="stat-number valid">0</div>
                        </div>
                    </div>
                </div>
                
                <div id="deck-price">
                    <div class="price-summary">
                        <h4>Deck Price</h4>
                        <div class="total-price">$0.00 CAD</div>
                        <div class="price-breakdown">
                            <div>Main: $0.00</div>
                            <div>Extra: $0.00</div>
                            <div>Side: $0.00</div>
                        </div>
                        <button class="primary-btn" onclick="deckBuilder.addDeckToCart()">
                            Add Deck to Cart
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Keyboard Shortcuts Help -->
    <div class="shortcuts-help">
        <strong>Shortcuts:</strong><br>
        Ctrl+S: Save | Ctrl+O: Load | Ctrl+N: New | Ctrl+Z: Undo
    </div>
</section>

<!-- Deck Templates Section (includes Popular Decks) -->
<section id="popular-decks-section" style="display: none;">
    <div style="background: white; border-radius: var(--radius-2xl); box-shadow: var(--shadow-lg); padding: var(--space-8); border: 1px solid var(--gray-200);">
        <h2 style="font-size: 2rem; font-weight: 700; color: var(--gray-900); margin-bottom: var(--space-6);">üÉè Deck Templates & Popular Lists</h2>
        
        <div style="display: flex; justify-content: center; gap: var(--space-4); margin-bottom: var(--space-8); flex-wrap: wrap;">
            <button class="filter-btn active" onclick="showTemplateCategory('all')" id="all-templates-btn">All Templates</button>
            <button class="filter-btn" onclick="showTemplateCategory('meta')" id="meta-btn">Meta Decks</button>
            <button class="filter-btn" onclick="showTemplateCategory('tier2')" id="tier2-btn">Tier 2</button>
            <button class="filter-btn" onclick="showTemplateCategory('casual')" id="casual-btn">Casual</button>
        </div>

        <div id="templates-container">
            <div class="loading-container">
                <div class="loading-spinner"></div>
                <p class="loading-text">Loading deck templates...</p>
            </div>
        </div>
    </div>
</section>
